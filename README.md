
# Gemini ESP - Flutter RC카 컨트롤러

이 프로젝트는 Gemini AI와 함께 개발한 Flutter 애플리케이션으로, ESP32-CAM 기반의 RC카를 원격으로 제어하고 실시간 영상을 스트리밍하기 위해 만들어졌습니다.

## 1. 프로젝트 개요

ESP32-CAM이 장착된 RC카의 1인칭 시점(FPV) 영상을 스마트폰이나 PC 화면에서 실시간으로 보면서, 화면의 컨트롤러를 통해 RC카를 직접 조종할 수 있는 크로스플랫폼(Android, Windows) 앱입니다.

## 2. 주요 기능

- **실시간 영상 스트리밍**: ESP32-CAM이 촬영하는 영상을 앱 화면 전체에 실시간으로 표시합니다.
- **직관적인 원격 제어**:
    - **이동**: 전진, 후진, 좌회전, 우회전, 정지
    - **부가 기능**: 내장 LED 켜고 끄기, 속도 조절
- **동적 IP 연결**: 앱 시작 시 RC카(ESP32)의 IP 주소를 직접 입력하여 연결하는 기능을 제공합니다.
- **크로스플랫폼 지원**: 단일 코드로 안드로이드 스마트폰과 윈도우 데스크톱 앱을 모두 지원합니다.
- **안정적인 제어**: 버튼을 길게 누르는 동안 움직이고 떼면 멈추는 방식을 적용하여 오작동을 방지합니다.

## 3. 시스템 구성

### 하드웨어 (서버)

- **MCU**: ESP32-CAM
- **펌웨어**: `08_camera.ino` (Arduino Sketch)
- **역할**:
    - Wi-Fi에 연결하여 웹 서버를 실행합니다.
    - 카메라 영상을 MJPEG 형식으로 스트리밍합니다. (Port 81)
    - Flutter 앱으로부터 HTTP 제어 명령을 수신하여 모터와 LED를 제어합니다. (Port 80)

### 소프트웨어 (클라이언트)

- **프로젝트**: `gemini_esp`
- **프레임워크**: Flutter
- **역할**:
    - 사용자로부터 제어 입력을 받아 HTTP GET 요청으로 변환하여 ESP32에 전송합니다.
    - ESP32로부터 MJPEG 비디오 스트림을 수신하여 화면에 표시합니다.

## 4. 사용 방법

### 1. 하드웨어 준비

1.  ESP32-CAM 보드에 `08_camera.ino` 펌웨어를 업로드합니다. (코드 내 Wi-Fi SSID와 비밀번호를 자신의 환경에 맞게 수정해야 합니다.)
2.  ESP32에 전원을 인가하고 Wi-Fi 네트워크에 연결합니다.
3.  시리얼 모니터나 공유기 설정 등에서 ESP32에 할당된 IP 주소를 확인합니다.

### 2. Flutter 앱 실행

1.  VS Code 등에서 `gemini_esp` 프로젝트를 엽니다.
2.  터미널에서 `flutter run` 명령어를 실행하여 앱을 시작합니다. (실행할 기기로 안드로이드 폰 또는 Windows 선택)
3.  앱의 첫 화면에 위에서 확인한 ESP32의 IP 주소를 입력하고 '연결' 버튼을 누릅니다.
4.  연결 성공 시, 영상이 나타나면 화면 하단의 컨트롤러로 RC카를 조종합니다.

## 5. 플랫폼별 참고사항

### Android

-   원활한 영상 스트리밍을 위해 `android/app/src/main/AndroidManifest.xml` 파일에 `android:usesCleartextTraffic="true"` 속성을 추가하여 암호화되지 않은 HTTP 통신을 허용했습니다.

### Windows

-   앱을 처음 실행할 때 Windows 방화벽이 네트워크 액세스 허용을 요청할 수 있습니다. 이때 **'액세스 허용'**을 선택해야 정상적으로 ESP32와 통신할 수 있습니다.
